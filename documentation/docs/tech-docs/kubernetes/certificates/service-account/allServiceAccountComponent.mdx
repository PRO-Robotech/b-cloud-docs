import ServiceAccount from '@site/docs/tech-docs/kubernetes/certificates/service-account/serviceAccountComponent.mdx'
import TabItem from '@theme/TabItem'
import Tabs from '@theme/Tabs'

> В Kubernetes `ServiceAccount` — это механизм, который позволяет приложениям внутри кластера аутентифицироваться при обращении к API-серверу.
> Приватный ключ, указываемый в `kube-apiserver` и `kube-controller-manager`, используется для **подписания токенов** этих аккаунтов. Это обеспечивает **безопасное и проверяемое** взаимодействие между сервисами и даёт возможность **гранулярного контроля доступа**.

> В этом разделе создаётся или подключается ключ, с помощью которого Kubernetes подписывает токены `ServiceAccount`.

<Tabs groupId="phase">
  <TabItem value="init" label="Init">
    <details>
      <summary>
        <div style={{ display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap' }}>
          <p style={{ marginBottom: 0 }}>Создание ключа подписи ServiceAccount</p>
          <p className="obligatory-note-orange">● Обязателен к применению</p>
        </div>
      </summary>
      <ServiceAccount />
    </details>
  </TabItem>

  <TabItem value="join" label="Join">
    <details>
      <summary>
        <div style={{ display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap' }}>
          <p style={{ marginBottom: 0 }}>Подключение ключа подписи ServiceAccount</p>
          <p className="obligatory-note-orange">● Обязателен к применению</p>
        </div>
      </summary>

      :::warning Внимание!
      Этап `join` **не генерирует ключ**, а использует ключ, полученный через этап выгрузки CA.

      Убедитесь, что вы прошли шаг:
      - [CA Download](/tech-docs/kubernetes/certificates/center-authority/all-ca)
      :::

    </details>
  </TabItem>
</Tabs>

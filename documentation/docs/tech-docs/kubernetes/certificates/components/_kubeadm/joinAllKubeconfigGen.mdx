import { CUSTOM_VALUE } from '@site/src/constants/kubernetes/customValue'

import CodeBlock from '@theme/CodeBlock'
import dedent from 'ts-dedent'

:::danger ВНИМАНИЕ!
Имейте в виду: на этапе Join нельзя выбрать, какие kubeconfigs генерировать — kubeadm создаёт их все сразу, в полном объёме.
:::

<h4>Генерация манифеста</h4>
<CodeBlock language="bash">
  {dedent`
    kubeadm join phase control-plane-prepare kubeconfig \\
      --config=${CUSTOM_VALUE.kubeadmBaseConfigPath.value}/kubeadm.yaml
  `}
</CodeBlock>

:::note

<CodeBlock language="bash">
  {dedent`
    [preflight] Reading configuration from the cluster...
    [preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'
    [kubeconfig] Generating kubeconfig files
    [kubeconfig] Using kubeconfig folder "/etc/kubernetes"
    [kubeconfig] Writing "admin.conf" kubeconfig file
    [kubeconfig] Writing "controller-manager.conf" kubeconfig file
    [kubeconfig] Writing "scheduler.conf" kubeconfig file
  `}
</CodeBlock>
:::
